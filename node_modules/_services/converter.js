var converter = require('_ebook-converter');
var Promise = require('bluebird');
var execPath = require('_config').execPath;


function convert(source, options) {
    var convert = converter({
        execPath: execPath,
        source: source,
        options: options
    });

    return new Promise(function(resolve, reject) {
        convert.on('exit', function(code) {
            if (code !== 0) reject(new Error('failed converting'));
            return resolve();
        });
    });
}

module.exports = {
    convert: convert
}
